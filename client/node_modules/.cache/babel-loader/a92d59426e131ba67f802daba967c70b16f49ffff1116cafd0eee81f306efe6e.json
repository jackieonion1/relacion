{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianfornelli/XcodeProjects/Relacion/CascadeProjects/windsurf-project/client/src/pages/Calendar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { addEvent, listEvents, deleteEvent } from '../lib/calendar';\nimport ViewSwitcher from '../components/ViewSwitcher';\nimport MonthlyCalendarView from '../components/MonthlyCalendarView';\nimport Modal from '../components/Modal';\nimport CollapsibleSection from '../components/CollapsibleSection';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventList = ({\n  events,\n  onDelete\n}) => {\n  if (events.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-gray-500 text-sm px-4 py-2\",\n      children: \"No hay eventos aqu\\xED.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"divide-y divide-rose-100\",\n    children: events.map(ev => {\n      var _ev$start, _ev$start$toDate;\n      const d = ((_ev$start = ev.start) === null || _ev$start === void 0 ? void 0 : (_ev$start$toDate = _ev$start.toDate) === null || _ev$start$toDate === void 0 ? void 0 : _ev$start$toDate.call(_ev$start)) || null;\n      const when = d ? d.toLocaleString([], {\n        dateStyle: 'medium',\n        timeStyle: 'short'\n      }) : '';\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"py-3 flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 min-w-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-medium text-gray-900 truncate\",\n            children: ev.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 20,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 truncate\",\n            children: [when, ev.location ? ` · ${ev.location}` : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 21,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onDelete(ev.id),\n          className: \"btn-link text-sm\",\n          children: \"Borrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 13\n        }, this)]\n      }, ev.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this);\n};\n_c = EventList;\nexport default function CalendarPage() {\n  _s();\n  const [view, setView] = useState('Lista'); // 'Lista' | 'Calendario'\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const pairId = useMemo(() => localStorage.getItem('pairId') || '', []);\n  const identity = useMemo(() => localStorage.getItem('identity') || 'yo', []);\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      setLoading(true);\n      try {\n        const list = await listEvents(pairId, {\n          futureOnly: false,\n          max: 100\n        });\n        if (!cancelled) setItems(list);\n      } catch (e) {\n        if (!cancelled) setError('Sin conexión o sin permisos.');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [pairId]);\n  const {\n    upcomingEvents,\n    pastEvents\n  } = useMemo(() => {\n    const now = new Date();\n    const upcoming = [];\n    const past = [];\n    const sortedItems = [...items].sort((a, b) => {\n      var _a$start, _a$start$toMillis, _b$start, _b$start$toMillis;\n      return (((_a$start = a.start) === null || _a$start === void 0 ? void 0 : (_a$start$toMillis = _a$start.toMillis) === null || _a$start$toMillis === void 0 ? void 0 : _a$start$toMillis.call(_a$start)) || 0) - (((_b$start = b.start) === null || _b$start === void 0 ? void 0 : (_b$start$toMillis = _b$start.toMillis) === null || _b$start$toMillis === void 0 ? void 0 : _b$start$toMillis.call(_b$start)) || 0);\n    });\n    for (const event of sortedItems) {\n      var _event$start;\n      if ((((_event$start = event.start) === null || _event$start === void 0 ? void 0 : _event$start.toDate()) || 0) >= now) {\n        upcoming.push(event);\n      } else {\n        past.push(event);\n      }\n    }\n    return {\n      upcomingEvents: upcoming,\n      pastEvents: past.reverse()\n    };\n  }, [items]);\n  async function onAdd(e) {\n    e.preventDefault();\n    const {\n      title,\n      location,\n      date,\n      time,\n      endDate\n    } = Object.fromEntries(new FormData(e.currentTarget));\n    if (!title || !date) return;\n    setSaving(true);\n    setError('');\n    try {\n      // This is the most efficient way: 1 write, 0 reads.\n      // We create a local event object that matches the structure of events from Firestore.\n      const [y, m, d] = date.split('-').map(Number);\n      const [h, min] = (time || '00:00').split(':').map(Number);\n      const startDate = new Date(y, m - 1, d, h, min);\n      const optimisticEvent = {\n        id: `local-${Date.now()}`,\n        title,\n        location,\n        start: {\n          toDate: () => startDate\n        },\n        // Mimic Firestore Timestamp\n        createdAt: {\n          toDate: () => new Date()\n        },\n        identity\n      };\n      if (endDate) {\n        const [ey, em, ed] = endDate.split('-').map(Number);\n        const finalDate = new Date(ey, em - 1, ed, 23, 59, 59, 999);\n        if (finalDate > startDate) {\n          optimisticEvent.end = {\n            toDate: () => finalDate\n          };\n        }\n      }\n      setItems(prev => [...prev, optimisticEvent]);\n      await addEvent(pairId, {\n        title,\n        date,\n        time,\n        endDate,\n        location\n      }, identity);\n      e.currentTarget.reset();\n      setIsModalOpen(false);\n    } catch (e2) {\n      setError('No se pudo guardar. Revisa tu conexión.');\n    } finally {\n      setSaving(false);\n    }\n  }\n  async function onDelete(id) {\n    try {\n      await deleteEvent(pairId, id);\n      setItems(prev => prev.filter(x => x.id !== id));\n    } catch {}\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(ViewSwitcher, {\n      views: ['Lista', 'Calendario'],\n      activeView: view,\n      onChange: setView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), view === 'Calendario' && /*#__PURE__*/_jsxDEV(MonthlyCalendarView, {\n      events: items\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }, this), view === 'Lista' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative min-h-[60vh]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divide-y divide-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card rounded-b-none\",\n          children: /*#__PURE__*/_jsxDEV(CollapsibleSection, {\n            title: \"Pr\\xF3ximos eventos\",\n            defaultOpen: true,\n            children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-gray-500 px-4 py-2\",\n              children: \"Cargando\\u2026\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 28\n            }, this) : /*#__PURE__*/_jsxDEV(EventList, {\n              events: upcomingEvents,\n              onDelete: onDelete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 87\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card rounded-t-none\",\n          children: /*#__PURE__*/_jsxDEV(CollapsibleSection, {\n            title: \"Eventos pasados\",\n            children: /*#__PURE__*/_jsxDEV(EventList, {\n              events: pastEvents,\n              onDelete: onDelete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsModalOpen(true),\n        className: \"fixed bottom-24 right-4 bg-rose-500 text-white rounded-full px-5 py-3 font-semibold shadow-lg hover:bg-rose-600 transition-transform active:scale-95\",\n        children: \"Nuevo evento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isModalOpen,\n      onClose: () => setIsModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onAdd,\n        className: \"p-6 space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-lg\",\n          children: \"A\\xF1adir evento\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"title\",\n            placeholder: \"T\\xEDtulo\",\n            className: \"input w-full\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"location\",\n            placeholder: \"Ubicaci\\xF3n (opcional)\",\n            className: \"input w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"date\",\n              type: \"date\",\n              className: \"input w-full\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"time\",\n              type: \"time\",\n              className: \"input w-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"endDate\",\n            type: \"date\",\n            className: \"input w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-rose-600\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setIsModalOpen(false),\n            className: \"btn-ghost\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: saving,\n            className: \"btn-primary disabled:opacity-60\",\n            children: saving ? 'Guardando…' : 'Añadir'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n_s(CalendarPage, \"Uy4lF0ha0Wg1CBLlp7Oyxu+FQq0=\");\n_c2 = CalendarPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"EventList\");\n$RefreshReg$(_c2, \"CalendarPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","addEvent","listEvents","deleteEvent","ViewSwitcher","MonthlyCalendarView","Modal","CollapsibleSection","jsxDEV","_jsxDEV","EventList","events","onDelete","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","ev","_ev$start","_ev$start$toDate","d","start","toDate","call","when","toLocaleString","dateStyle","timeStyle","title","location","onClick","id","_c","CalendarPage","_s","view","setView","isModalOpen","setIsModalOpen","pairId","localStorage","getItem","identity","items","setItems","loading","setLoading","saving","setSaving","error","setError","cancelled","list","futureOnly","max","e","upcomingEvents","pastEvents","now","Date","upcoming","past","sortedItems","sort","a","b","_a$start","_a$start$toMillis","_b$start","_b$start$toMillis","toMillis","event","_event$start","push","reverse","onAdd","preventDefault","date","time","endDate","Object","fromEntries","FormData","currentTarget","y","m","split","Number","h","min","startDate","optimisticEvent","createdAt","ey","em","ed","finalDate","end","prev","reset","e2","filter","x","views","activeView","onChange","defaultOpen","isOpen","onClose","onSubmit","name","placeholder","required","type","disabled","_c2","$RefreshReg$"],"sources":["/Users/sebastianfornelli/XcodeProjects/Relacion/CascadeProjects/windsurf-project/client/src/pages/Calendar.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { addEvent, listEvents, deleteEvent } from '../lib/calendar';\nimport ViewSwitcher from '../components/ViewSwitcher';\nimport MonthlyCalendarView from '../components/MonthlyCalendarView';\nimport Modal from '../components/Modal';\nimport CollapsibleSection from '../components/CollapsibleSection';\n\nconst EventList = ({ events, onDelete }) => {\n  if (events.length === 0) {\n    return <div className=\"text-gray-500 text-sm px-4 py-2\">No hay eventos aquí.</div>;\n  }\n  return (\n    <ul className=\"divide-y divide-rose-100\">\n      {events.map((ev) => {\n        const d = ev.start?.toDate?.() || null;\n        const when = d ? d.toLocaleString([], { dateStyle: 'medium', timeStyle: 'short' }) : '';\n        return (\n          <li key={ev.id} className=\"py-3 flex items-center gap-3\">\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"font-medium text-gray-900 truncate\">{ev.title}</div>\n              <div className=\"text-sm text-gray-500 truncate\">{when}{ev.location ? ` · ${ev.location}` : ''}</div>\n            </div>\n            <button onClick={() => onDelete(ev.id)} className=\"btn-link text-sm\">Borrar</button>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport default function CalendarPage() {\n  const [view, setView] = useState('Lista'); // 'Lista' | 'Calendario'\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const pairId = useMemo(() => localStorage.getItem('pairId') || '', []);\n  const identity = useMemo(() => localStorage.getItem('identity') || 'yo', []);\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      setLoading(true);\n      try {\n        const list = await listEvents(pairId, { futureOnly: false, max: 100 });\n        if (!cancelled) setItems(list);\n      } catch (e) {\n        if (!cancelled) setError('Sin conexión o sin permisos.');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    })();\n    return () => { cancelled = true; };\n  }, [pairId]);\n\n  const { upcomingEvents, pastEvents } = useMemo(() => {\n    const now = new Date();\n    const upcoming = [];\n    const past = [];\n    const sortedItems = [...items].sort((a,b) => (a.start?.toMillis?.()||0) - (b.start?.toMillis?.()||0));\n\n    for (const event of sortedItems) {\n      if ((event.start?.toDate() || 0) >= now) {\n        upcoming.push(event);\n      } else {\n        past.push(event);\n      }\n    }\n    return { upcomingEvents: upcoming, pastEvents: past.reverse() };\n  }, [items]);\n\n  async function onAdd(e) {\n    e.preventDefault();\n    const { title, location, date, time, endDate } = Object.fromEntries(new FormData(e.currentTarget));\n    if (!title || !date) return;\n    setSaving(true);\n    setError('');\n    try {\n      // This is the most efficient way: 1 write, 0 reads.\n      // We create a local event object that matches the structure of events from Firestore.\n      const [y, m, d] = date.split('-').map(Number);\n      const [h, min] = (time || '00:00').split(':').map(Number);\n      const startDate = new Date(y, m - 1, d, h, min);\n\n      const optimisticEvent = {\n        id: `local-${Date.now()}`,\n        title,\n        location,\n        start: { toDate: () => startDate }, // Mimic Firestore Timestamp\n        createdAt: { toDate: () => new Date() },\n        identity,\n      };\n\n      if (endDate) {\n        const [ey, em, ed] = endDate.split('-').map(Number);\n        const finalDate = new Date(ey, em - 1, ed, 23, 59, 59, 999);\n        if (finalDate > startDate) {\n          optimisticEvent.end = { toDate: () => finalDate };\n        }\n      }\n\n      setItems(prev => [...prev, optimisticEvent]);\n      await addEvent(pairId, { title, date, time, endDate, location }, identity);\n\n      e.currentTarget.reset();\n      setIsModalOpen(false);\n    } catch (e2) {\n      setError('No se pudo guardar. Revisa tu conexión.');\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  async function onDelete(id) {\n    try {\n      await deleteEvent(pairId, id);\n      setItems((prev) => prev.filter((x) => x.id !== id));\n    } catch {}\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <ViewSwitcher \n        views={['Lista', 'Calendario']}\n        activeView={view}\n        onChange={setView}\n      />\n\n      {view === 'Calendario' && <MonthlyCalendarView events={items} />}\n\n      {view === 'Lista' && (\n        <div className=\"relative min-h-[60vh]\">\n          <div className=\"divide-y divide-gray-200\">\n            <div className=\"card rounded-b-none\">\n              <CollapsibleSection title=\"Próximos eventos\" defaultOpen>\n                {loading ? <div className=\"text-gray-500 px-4 py-2\">Cargando…</div> : <EventList events={upcomingEvents} onDelete={onDelete} />}\n              </CollapsibleSection>\n            </div>\n            <div className=\"card rounded-t-none\">\n              <CollapsibleSection title=\"Eventos pasados\">\n                <EventList events={pastEvents} onDelete={onDelete} />\n              </CollapsibleSection>\n            </div>\n          </div>\n          <button onClick={() => setIsModalOpen(true)} className=\"fixed bottom-24 right-4 bg-rose-500 text-white rounded-full px-5 py-3 font-semibold shadow-lg hover:bg-rose-600 transition-transform active:scale-95\">\n            Nuevo evento\n          </button>\n        </div>\n      )}\n\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)}>\n        <form onSubmit={onAdd} className=\"p-6 space-y-4\">\n          <h3 className=\"font-semibold text-lg\">Añadir evento</h3>\n          <div className=\"space-y-3\">\n            <input name=\"title\" placeholder=\"Título\" className=\"input w-full\" required />\n            <input name=\"location\" placeholder=\"Ubicación (opcional)\" className=\"input w-full\" />\n            <div className=\"grid grid-cols-2 gap-3\">\n              <input name=\"date\" type=\"date\" className=\"input w-full\" required />\n              <input name=\"time\" type=\"time\" className=\"input w-full\" />\n            </div>\n            <input name=\"endDate\" type=\"date\" className=\"input w-full\" />\n          </div>\n          {error && <p className=\"text-xs text-rose-600\">{error}</p>}\n          <div className=\"flex justify-end gap-2\">\n            <button type=\"button\" onClick={() => setIsModalOpen(false)} className=\"btn-ghost\">Cancelar</button>\n            <button disabled={saving} className=\"btn-primary disabled:opacity-60\">{saving ? 'Guardando…' : 'Añadir'}</button>\n          </div>\n        </form>\n      </Modal>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,QAAQ,EAAEC,UAAU,EAAEC,WAAW,QAAQ,iBAAiB;AACnE,OAAOC,YAAY,MAAM,4BAA4B;AACrD,OAAOC,mBAAmB,MAAM,mCAAmC;AACnE,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,kBAAkB,MAAM,kCAAkC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,MAAMC,SAAS,GAAGA,CAAC;EAAEC,MAAM;EAAEC;AAAS,CAAC,KAAK;EAC1C,IAAID,MAAM,CAACE,MAAM,KAAK,CAAC,EAAE;IACvB,oBAAOJ,OAAA;MAAKK,SAAS,EAAC,iCAAiC;MAAAC,QAAA,EAAC;IAAoB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACpF;EACA,oBACEV,OAAA;IAAIK,SAAS,EAAC,0BAA0B;IAAAC,QAAA,EACrCJ,MAAM,CAACS,GAAG,CAAEC,EAAE,IAAK;MAAA,IAAAC,SAAA,EAAAC,gBAAA;MAClB,MAAMC,CAAC,GAAG,EAAAF,SAAA,GAAAD,EAAE,CAACI,KAAK,cAAAH,SAAA,wBAAAC,gBAAA,GAARD,SAAA,CAAUI,MAAM,cAAAH,gBAAA,uBAAhBA,gBAAA,CAAAI,IAAA,CAAAL,SAAmB,CAAC,KAAI,IAAI;MACtC,MAAMM,IAAI,GAAGJ,CAAC,GAAGA,CAAC,CAACK,cAAc,CAAC,EAAE,EAAE;QAAEC,SAAS,EAAE,QAAQ;QAAEC,SAAS,EAAE;MAAQ,CAAC,CAAC,GAAG,EAAE;MACvF,oBACEtB,OAAA;QAAgBK,SAAS,EAAC,8BAA8B;QAAAC,QAAA,gBACtDN,OAAA;UAAKK,SAAS,EAAC,gBAAgB;UAAAC,QAAA,gBAC7BN,OAAA;YAAKK,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAEM,EAAE,CAACW;UAAK;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACpEV,OAAA;YAAKK,SAAS,EAAC,gCAAgC;YAAAC,QAAA,GAAEa,IAAI,EAAEP,EAAE,CAACY,QAAQ,GAAG,MAAMZ,EAAE,CAACY,QAAQ,EAAE,GAAG,EAAE;UAAA;YAAAjB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjG,CAAC,eACNV,OAAA;UAAQyB,OAAO,EAAEA,CAAA,KAAMtB,QAAQ,CAACS,EAAE,CAACc,EAAE,CAAE;UAACrB,SAAS,EAAC,kBAAkB;UAAAC,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,GAL7EE,EAAE,CAACc,EAAE;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMV,CAAC;IAET,CAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAET,CAAC;AAACiB,EAAA,GArBI1B,SAAS;AAuBf,eAAe,SAAS2B,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACrC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGxC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACyC,WAAW,EAAEC,cAAc,CAAC,GAAG1C,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM2C,MAAM,GAAG5C,OAAO,CAAC,MAAM6C,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC;EACtE,MAAMC,QAAQ,GAAG/C,OAAO,CAAC,MAAM6C,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,EAAE,EAAE,CAAC;EAC5E,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGhD,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACiD,OAAO,EAAEC,UAAU,CAAC,GAAGlD,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACmD,MAAM,EAAEC,SAAS,CAAC,GAAGpD,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACqD,KAAK,EAAEC,QAAQ,CAAC,GAAGtD,QAAQ,CAAC,EAAE,CAAC;EAEtCF,SAAS,CAAC,MAAM;IACd,IAAIyD,SAAS,GAAG,KAAK;IACrB,CAAC,YAAY;MACXL,UAAU,CAAC,IAAI,CAAC;MAChB,IAAI;QACF,MAAMM,IAAI,GAAG,MAAMtD,UAAU,CAACyC,MAAM,EAAE;UAAEc,UAAU,EAAE,KAAK;UAAEC,GAAG,EAAE;QAAI,CAAC,CAAC;QACtE,IAAI,CAACH,SAAS,EAAEP,QAAQ,CAACQ,IAAI,CAAC;MAChC,CAAC,CAAC,OAAOG,CAAC,EAAE;QACV,IAAI,CAACJ,SAAS,EAAED,QAAQ,CAAC,8BAA8B,CAAC;MAC1D,CAAC,SAAS;QACR,IAAI,CAACC,SAAS,EAAEL,UAAU,CAAC,KAAK,CAAC;MACnC;IACF,CAAC,EAAE,CAAC;IACJ,OAAO,MAAM;MAAEK,SAAS,GAAG,IAAI;IAAE,CAAC;EACpC,CAAC,EAAE,CAACZ,MAAM,CAAC,CAAC;EAEZ,MAAM;IAAEiB,cAAc;IAAEC;EAAW,CAAC,GAAG9D,OAAO,CAAC,MAAM;IACnD,MAAM+D,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;IACtB,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMC,IAAI,GAAG,EAAE;IACf,MAAMC,WAAW,GAAG,CAAC,GAAGnB,KAAK,CAAC,CAACoB,IAAI,CAAC,CAACC,CAAC,EAACC,CAAC;MAAA,IAAAC,QAAA,EAAAC,iBAAA,EAAAC,QAAA,EAAAC,iBAAA;MAAA,OAAK,CAAC,EAAAH,QAAA,GAAAF,CAAC,CAAC3C,KAAK,cAAA6C,QAAA,wBAAAC,iBAAA,GAAPD,QAAA,CAASI,QAAQ,cAAAH,iBAAA,uBAAjBA,iBAAA,CAAA5C,IAAA,CAAA2C,QAAoB,CAAC,KAAE,CAAC,KAAK,EAAAE,QAAA,GAAAH,CAAC,CAAC5C,KAAK,cAAA+C,QAAA,wBAAAC,iBAAA,GAAPD,QAAA,CAASE,QAAQ,cAAAD,iBAAA,uBAAjBA,iBAAA,CAAA9C,IAAA,CAAA6C,QAAoB,CAAC,KAAE,CAAC,CAAC;IAAA,EAAC;IAErG,KAAK,MAAMG,KAAK,IAAIT,WAAW,EAAE;MAAA,IAAAU,YAAA;MAC/B,IAAI,CAAC,EAAAA,YAAA,GAAAD,KAAK,CAAClD,KAAK,cAAAmD,YAAA,uBAAXA,YAAA,CAAalD,MAAM,CAAC,CAAC,KAAI,CAAC,KAAKoC,GAAG,EAAE;QACvCE,QAAQ,CAACa,IAAI,CAACF,KAAK,CAAC;MACtB,CAAC,MAAM;QACLV,IAAI,CAACY,IAAI,CAACF,KAAK,CAAC;MAClB;IACF;IACA,OAAO;MAAEf,cAAc,EAAEI,QAAQ;MAAEH,UAAU,EAAEI,IAAI,CAACa,OAAO,CAAC;IAAE,CAAC;EACjE,CAAC,EAAE,CAAC/B,KAAK,CAAC,CAAC;EAEX,eAAegC,KAAKA,CAACpB,CAAC,EAAE;IACtBA,CAAC,CAACqB,cAAc,CAAC,CAAC;IAClB,MAAM;MAAEhD,KAAK;MAAEC,QAAQ;MAAEgD,IAAI;MAAEC,IAAI;MAAEC;IAAQ,CAAC,GAAGC,MAAM,CAACC,WAAW,CAAC,IAAIC,QAAQ,CAAC3B,CAAC,CAAC4B,aAAa,CAAC,CAAC;IAClG,IAAI,CAACvD,KAAK,IAAI,CAACiD,IAAI,EAAE;IACrB7B,SAAS,CAAC,IAAI,CAAC;IACfE,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACF;MACA;MACA,MAAM,CAACkC,CAAC,EAAEC,CAAC,EAAEjE,CAAC,CAAC,GAAGyD,IAAI,CAACS,KAAK,CAAC,GAAG,CAAC,CAACtE,GAAG,CAACuE,MAAM,CAAC;MAC7C,MAAM,CAACC,CAAC,EAAEC,GAAG,CAAC,GAAG,CAACX,IAAI,IAAI,OAAO,EAAEQ,KAAK,CAAC,GAAG,CAAC,CAACtE,GAAG,CAACuE,MAAM,CAAC;MACzD,MAAMG,SAAS,GAAG,IAAI/B,IAAI,CAACyB,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEjE,CAAC,EAAEoE,CAAC,EAAEC,GAAG,CAAC;MAE/C,MAAME,eAAe,GAAG;QACtB5D,EAAE,EAAE,SAAS4B,IAAI,CAACD,GAAG,CAAC,CAAC,EAAE;QACzB9B,KAAK;QACLC,QAAQ;QACRR,KAAK,EAAE;UAAEC,MAAM,EAAEA,CAAA,KAAMoE;QAAU,CAAC;QAAE;QACpCE,SAAS,EAAE;UAAEtE,MAAM,EAAEA,CAAA,KAAM,IAAIqC,IAAI,CAAC;QAAE,CAAC;QACvCjB;MACF,CAAC;MAED,IAAIqC,OAAO,EAAE;QACX,MAAM,CAACc,EAAE,EAAEC,EAAE,EAAEC,EAAE,CAAC,GAAGhB,OAAO,CAACO,KAAK,CAAC,GAAG,CAAC,CAACtE,GAAG,CAACuE,MAAM,CAAC;QACnD,MAAMS,SAAS,GAAG,IAAIrC,IAAI,CAACkC,EAAE,EAAEC,EAAE,GAAG,CAAC,EAAEC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC;QAC3D,IAAIC,SAAS,GAAGN,SAAS,EAAE;UACzBC,eAAe,CAACM,GAAG,GAAG;YAAE3E,MAAM,EAAEA,CAAA,KAAM0E;UAAU,CAAC;QACnD;MACF;MAEApD,QAAQ,CAACsD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEP,eAAe,CAAC,CAAC;MAC5C,MAAM9F,QAAQ,CAAC0C,MAAM,EAAE;QAAEX,KAAK;QAAEiD,IAAI;QAAEC,IAAI;QAAEC,OAAO;QAAElD;MAAS,CAAC,EAAEa,QAAQ,CAAC;MAE1Ea,CAAC,CAAC4B,aAAa,CAACgB,KAAK,CAAC,CAAC;MACvB7D,cAAc,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC,OAAO8D,EAAE,EAAE;MACXlD,QAAQ,CAAC,yCAAyC,CAAC;IACrD,CAAC,SAAS;MACRF,SAAS,CAAC,KAAK,CAAC;IAClB;EACF;EAEA,eAAexC,QAAQA,CAACuB,EAAE,EAAE;IAC1B,IAAI;MACF,MAAMhC,WAAW,CAACwC,MAAM,EAAER,EAAE,CAAC;MAC7Ba,QAAQ,CAAEsD,IAAI,IAAKA,IAAI,CAACG,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACvE,EAAE,KAAKA,EAAE,CAAC,CAAC;IACrD,CAAC,CAAC,MAAM,CAAC;EACX;EAEA,oBACE1B,OAAA;IAAKK,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBN,OAAA,CAACL,YAAY;MACXuG,KAAK,EAAE,CAAC,OAAO,EAAE,YAAY,CAAE;MAC/BC,UAAU,EAAErE,IAAK;MACjBsE,QAAQ,EAAErE;IAAQ;MAAAxB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CAAC,EAEDoB,IAAI,KAAK,YAAY,iBAAI9B,OAAA,CAACJ,mBAAmB;MAACM,MAAM,EAAEoC;IAAM;MAAA/B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAE/DoB,IAAI,KAAK,OAAO,iBACf9B,OAAA;MAAKK,SAAS,EAAC,uBAAuB;MAAAC,QAAA,gBACpCN,OAAA;QAAKK,SAAS,EAAC,0BAA0B;QAAAC,QAAA,gBACvCN,OAAA;UAAKK,SAAS,EAAC,qBAAqB;UAAAC,QAAA,eAClCN,OAAA,CAACF,kBAAkB;YAACyB,KAAK,EAAC,qBAAkB;YAAC8E,WAAW;YAAA/F,QAAA,EACrDkC,OAAO,gBAAGxC,OAAA;cAAKK,SAAS,EAAC,yBAAyB;cAAAC,QAAA,EAAC;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,gBAAGV,OAAA,CAACC,SAAS;cAACC,MAAM,EAAEiD,cAAe;cAAChD,QAAQ,EAAEA;YAAS;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7G;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB,CAAC,eACNV,OAAA;UAAKK,SAAS,EAAC,qBAAqB;UAAAC,QAAA,eAClCN,OAAA,CAACF,kBAAkB;YAACyB,KAAK,EAAC,iBAAiB;YAAAjB,QAAA,eACzCN,OAAA,CAACC,SAAS;cAACC,MAAM,EAAEkD,UAAW;cAACjD,QAAQ,EAAEA;YAAS;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACNV,OAAA;QAAQyB,OAAO,EAAEA,CAAA,KAAMQ,cAAc,CAAC,IAAI,CAAE;QAAC5B,SAAS,EAAC,sJAAsJ;QAAAC,QAAA,EAAC;MAE9M;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,eAEDV,OAAA,CAACH,KAAK;MAACyG,MAAM,EAAEtE,WAAY;MAACuE,OAAO,EAAEA,CAAA,KAAMtE,cAAc,CAAC,KAAK,CAAE;MAAA3B,QAAA,eAC/DN,OAAA;QAAMwG,QAAQ,EAAElC,KAAM;QAACjE,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC9CN,OAAA;UAAIK,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAC;QAAa;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACxDV,OAAA;UAAKK,SAAS,EAAC,WAAW;UAAAC,QAAA,gBACxBN,OAAA;YAAOyG,IAAI,EAAC,OAAO;YAACC,WAAW,EAAC,WAAQ;YAACrG,SAAS,EAAC,cAAc;YAACsG,QAAQ;UAAA;YAAApG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC7EV,OAAA;YAAOyG,IAAI,EAAC,UAAU;YAACC,WAAW,EAAC,yBAAsB;YAACrG,SAAS,EAAC;UAAc;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACrFV,OAAA;YAAKK,SAAS,EAAC,wBAAwB;YAAAC,QAAA,gBACrCN,OAAA;cAAOyG,IAAI,EAAC,MAAM;cAACG,IAAI,EAAC,MAAM;cAACvG,SAAS,EAAC,cAAc;cAACsG,QAAQ;YAAA;cAAApG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACnEV,OAAA;cAAOyG,IAAI,EAAC,MAAM;cAACG,IAAI,EAAC,MAAM;cAACvG,SAAS,EAAC;YAAc;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvD,CAAC,eACNV,OAAA;YAAOyG,IAAI,EAAC,SAAS;YAACG,IAAI,EAAC,MAAM;YAACvG,SAAS,EAAC;UAAc;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1D,CAAC,EACLkC,KAAK,iBAAI5C,OAAA;UAAGK,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAEsC;QAAK;UAAArC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1DV,OAAA;UAAKK,SAAS,EAAC,wBAAwB;UAAAC,QAAA,gBACrCN,OAAA;YAAQ4G,IAAI,EAAC,QAAQ;YAACnF,OAAO,EAAEA,CAAA,KAAMQ,cAAc,CAAC,KAAK,CAAE;YAAC5B,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACnGV,OAAA;YAAQ6G,QAAQ,EAAEnE,MAAO;YAACrC,SAAS,EAAC,iCAAiC;YAAAC,QAAA,EAAEoC,MAAM,GAAG,YAAY,GAAG;UAAQ;YAAAnC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9G,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEV;AAACmB,EAAA,CA9IuBD,YAAY;AAAAkF,GAAA,GAAZlF,YAAY;AAAA,IAAAD,EAAA,EAAAmF,GAAA;AAAAC,YAAA,CAAApF,EAAA;AAAAoF,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}