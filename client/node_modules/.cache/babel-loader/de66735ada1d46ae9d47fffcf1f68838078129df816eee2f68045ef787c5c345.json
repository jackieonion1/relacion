{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianfornelli/XcodeProjects/Relacion/CascadeProjects/windsurf-project/client/src/pages/Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { listEvents } from '../lib/calendar';\nimport Countdown from '../components/Countdown';\nimport RandomPhoto from '../components/RandomPhoto';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Dashboard() {\n  _s();\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Hardcoded anniversary date: November 24, 2024\n  const anniv = '2024-11-24';\n\n  // Generate automatic special events (only next occurrence of each type)\n  const generateSpecialEvents = () => {\n    const specialEvents = [];\n    const now = new Date();\n    const anniversaryDate = new Date(2024, 10, 24); // November 24, 2024\n\n    // Find next monthiversary/anniversary (24th of next month)\n    let nextMonthiversary = null;\n    for (let i = 0; i < 24; i++) {\n      // Look ahead 24 months\n      const testDate = new Date(now.getFullYear(), now.getMonth() + i, 24);\n      if (testDate > now && testDate >= anniversaryDate) {\n        const isRealAnniversary = testDate.getMonth() === 10; // November\n\n        // Calculate months since anniversary\n        const yearsDiff = testDate.getFullYear() - anniversaryDate.getFullYear();\n        const monthsDiff = testDate.getMonth() - anniversaryDate.getMonth();\n        const totalMonths = yearsDiff * 12 + monthsDiff;\n        if (totalMonths > 0) {\n          let title = '';\n          if (totalMonths >= 12) {\n            const years = Math.floor(totalMonths / 12);\n            const remainingMonths = totalMonths % 12;\n            if (remainingMonths === 0) {\n              title = `${years} ${years === 1 ? 'aÃ±o' : 'aÃ±os'} juntos`;\n            } else {\n              title = `${years} ${years === 1 ? 'aÃ±o' : 'aÃ±os'} y ${remainingMonths} ${remainingMonths === 1 ? 'mes' : 'meses'} juntos`;\n            }\n          } else {\n            title = `${totalMonths} ${totalMonths === 1 ? 'mes' : 'meses'} juntos`;\n          }\n          if (isRealAnniversary) {\n            title = `Â¡Aniversario! ${title}`;\n          } else {\n            title = `Â¡Mesiversario! ${title}`;\n          }\n          nextMonthiversary = {\n            id: `anniversary-${testDate.getFullYear()}-${testDate.getMonth()}`,\n            title,\n            start: {\n              toDate: () => testDate\n            },\n            location: '',\n            eventType: 'conjunto',\n            isSpecialEvent: true,\n            specialType: isRealAnniversary ? 'anniversary' : 'monthiversary'\n          };\n          break;\n        }\n      }\n    }\n    if (nextMonthiversary) {\n      specialEvents.push(nextMonthiversary);\n    }\n\n    // Find next Lucy's birthday (April 21)\n    let nextLucyBirthday = null;\n    for (let year = now.getFullYear(); year <= now.getFullYear() + 1; year++) {\n      const lucyBirthday = new Date(year, 3, 21); // April 21\n      if (lucyBirthday > now) {\n        const lucyAge = year - 2003;\n        if (lucyAge > 0) {\n          nextLucyBirthday = {\n            id: `lucy-birthday-${year}`,\n            title: `Â¡CumpleaÃ±os de Lucy! ${lucyAge} aÃ±os`,\n            start: {\n              toDate: () => lucyBirthday\n            },\n            location: '',\n            eventType: 'lucy-birthday',\n            isSpecialEvent: true,\n            specialType: 'birthday'\n          };\n          break;\n        }\n      }\n    }\n    if (nextLucyBirthday) {\n      specialEvents.push(nextLucyBirthday);\n    }\n\n    // Find next Sebas's birthday (November 4)\n    let nextSebasBirthday = null;\n    for (let year = now.getFullYear(); year <= now.getFullYear() + 1; year++) {\n      const sebasBirthday = new Date(year, 10, 4); // November 4\n      if (sebasBirthday > now) {\n        const sebasAge = year - 1998;\n        if (sebasAge > 0) {\n          nextSebasBirthday = {\n            id: `sebas-birthday-${year}`,\n            title: `Â¡CumpleaÃ±os de Sebas! ${sebasAge} aÃ±os`,\n            start: {\n              toDate: () => sebasBirthday\n            },\n            location: '',\n            eventType: 'sebas-birthday',\n            isSpecialEvent: true,\n            specialType: 'birthday'\n          };\n          break;\n        }\n      }\n    }\n    if (nextSebasBirthday) {\n      specialEvents.push(nextSebasBirthday);\n    }\n    return specialEvents;\n  };\n  const timeTogether = useMemo(() => {\n    const start = new Date(anniv);\n    const now = new Date();\n    let years = now.getFullYear() - start.getFullYear();\n    let months = now.getMonth() - start.getMonth();\n    let days = now.getDate() - start.getDate();\n    if (days < 0) {\n      months--;\n      const lastMonth = new Date(now.getFullYear(), now.getMonth(), 0);\n      days += lastMonth.getDate();\n    }\n    if (months < 0) {\n      years--;\n      months += 12;\n    }\n    return {\n      years,\n      months,\n      days\n    };\n  }, [anniv]);\n  useEffect(() => {\n    let isCancelled = false;\n    async function fetchEvents() {\n      console.log('ðŸ”„ Dashboard: Starting to load events');\n      setLoading(true);\n      try {\n        const pairId = localStorage.getItem('pairId');\n        if (pairId && !isCancelled) {\n          const firestoreEvents = await listEvents(pairId, {\n            futureOnly: true,\n            max: 100\n          });\n\n          // Generate special events\n          const specialEvents = generateSpecialEvents();\n\n          // Merge and sort all events chronologically\n          const allEvents = [...firestoreEvents, ...specialEvents];\n          allEvents.sort((a, b) => {\n            var _a$start, _b$start;\n            const dateA = (_a$start = a.start) !== null && _a$start !== void 0 && _a$start.toDate ? a.start.toDate() : new Date(0);\n            const dateB = (_b$start = b.start) !== null && _b$start !== void 0 && _b$start.toDate ? b.start.toDate() : new Date(0);\n            return dateA - dateB;\n          });\n          console.log('âœ… Dashboard: Events loaded', allEvents.length, 'events');\n          setEvents(allEvents);\n        }\n      } catch (error) {\n        console.error(\"Error fetching events:\", error);\n        // Even if Firestore fails, show special events\n        const specialEvents = generateSpecialEvents();\n        specialEvents.sort((a, b) => {\n          var _a$start2, _b$start2;\n          const dateA = (_a$start2 = a.start) !== null && _a$start2 !== void 0 && _a$start2.toDate ? a.start.toDate() : new Date(0);\n          const dateB = (_b$start2 = b.start) !== null && _b$start2 !== void 0 && _b$start2.toDate ? b.start.toDate() : new Date(0);\n          return dateA - dateB;\n        });\n        setEvents(specialEvents);\n      } finally {\n        if (!isCancelled) {\n          console.log('ðŸ Dashboard: Loading finished');\n          setLoading(false);\n        }\n      }\n    }\n    fetchEvents();\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n  const nextEvent = useMemo(() => {\n    // Only show next \"conjunto\" event for countdown\n    const conjuntoEvents = events.filter(event => event.eventType === 'conjunto');\n    const result = conjuntoEvents.length > 0 ? conjuntoEvents[0] : null;\n    console.log('ðŸŽ¯ Dashboard: nextEvent changed', result ? result.title : 'null');\n    return result;\n  }, [events]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [timeTogether ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600 mb-2\",\n        children: \"Llevamos juntos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-around gap-2 p-3 bg-rose-50/50 rounded-lg\",\n        children: [{\n          value: timeTogether.years,\n          label: 'AÃ±o',\n          plural: 'AÃ±os'\n        }, {\n          value: timeTogether.months,\n          label: 'Mes',\n          plural: 'Meses'\n        }, {\n          value: timeTogether.days,\n          label: 'DÃ­a',\n          plural: 'DÃ­as'\n        }].map(({\n          value,\n          label,\n          plural\n        }) => (timeTogether.years > 0 || label !== 'AÃ±o') && (\n        // Show years only if > 0\n        timeTogether.months > 0 || label !== 'Mes' || timeTogether.years > 0) &&\n        /*#__PURE__*/\n        // Show months if > 0 or if years are shown\n        _jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl md:text-3xl font-bold text-rose-600\",\n            children: String(value).padStart(2, '0')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: value === 1 ? label : plural\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this)]\n        }, label, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600\",\n        children: \"Configura tu aniversario en Ajustes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/settings\",\n        className: \"inline-block mt-2 btn-primary\",\n        children: \"Ir a Ajustes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: nextEvent ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-600 mb-2\",\n          children: \"Pr\\xF3ximo evento\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-semibold text-gray-900 mb-2\",\n          children: nextEvent.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"min-h-[80px]\",\n          children: /*#__PURE__*/_jsxDEV(Countdown, {\n            toDate: nextEvent.start.toDate()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-500 min-h-[80px] flex items-center\",\n        children: loading ? \"Cargando prÃ³ximo evento...\" : \"No hay eventos prÃ³ximos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-sm text-gray-600\",\n          children: \"Pr\\xF3ximos eventos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/calendar\",\n          className: \"btn-link text-sm\",\n          children: \"Ver calendario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-[140px]\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-pulse bg-gray-200 h-4 rounded flex-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-pulse bg-gray-200 w-2 h-2 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-pulse bg-gray-200 h-3 rounded w-20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm flex items-center gap-2 mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-pulse bg-gray-200 h-4 rounded flex-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-pulse bg-gray-200 w-2 h-2 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-pulse bg-gray-200 h-3 rounded w-24\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm flex items-center gap-2 mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-pulse bg-gray-200 h-4 rounded flex-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-pulse bg-gray-200 w-2 h-2 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-pulse bg-gray-200 h-3 rounded w-16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this) : events.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-2\",\n          children: events.slice(0, 5).map(ev => {\n            var _ev$start, _ev$start$toDate;\n            const d = (_ev$start = ev.start) === null || _ev$start === void 0 ? void 0 : (_ev$start$toDate = _ev$start.toDate) === null || _ev$start$toDate === void 0 ? void 0 : _ev$start$toDate.call(_ev$start);\n            const when = d ? d.toLocaleDateString('es-ES', {\n              month: 'long',\n              day: 'numeric'\n            }) : '';\n\n            // Get event type color\n            let eventTypeColor = 'bg-rose-500'; // Default: conjunto (pink)\n            if (ev.eventType === 'novio') {\n              eventTypeColor = 'bg-yellow-500';\n            } else if (ev.eventType === 'novia') {\n              eventTypeColor = 'bg-purple-500';\n            } else if (ev.eventType === 'sebas-birthday') {\n              eventTypeColor = 'bg-yellow-500'; // Sebas birthday: yellow\n            } else if (ev.eventType === 'lucy-birthday') {\n              eventTypeColor = 'bg-purple-400'; // Lucy birthday: lilac\n            } else if (ev.eventType === 'conjunto' && ev.isSpecialEvent) {\n              eventTypeColor = 'bg-rose-500'; // Anniversary/monthiversary: pink\n            }\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-sm flex items-center gap-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium text-gray-800 truncate\",\n                    children: ev.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `w-2 h-2 rounded-full flex-shrink-0 ${eventTypeColor}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: when\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 21\n              }, this)\n            }, ev.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"No hay pr\\xF3ximos eventos. \\xA1Crea el primero!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RandomPhoto, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"sxQrj4dK6HAMo9Lm/4GXgQ9Ppak=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Link","listEvents","Countdown","RandomPhoto","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","events","setEvents","loading","setLoading","anniv","generateSpecialEvents","specialEvents","now","Date","anniversaryDate","nextMonthiversary","i","testDate","getFullYear","getMonth","isRealAnniversary","yearsDiff","monthsDiff","totalMonths","title","years","Math","floor","remainingMonths","id","start","toDate","location","eventType","isSpecialEvent","specialType","push","nextLucyBirthday","year","lucyBirthday","lucyAge","nextSebasBirthday","sebasBirthday","sebasAge","timeTogether","months","days","getDate","lastMonth","isCancelled","fetchEvents","console","log","pairId","localStorage","getItem","firestoreEvents","futureOnly","max","allEvents","sort","a","b","_a$start","_b$start","dateA","dateB","length","error","_a$start2","_b$start2","nextEvent","conjuntoEvents","filter","event","result","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","label","plural","map","String","padStart","to","slice","ev","_ev$start","_ev$start$toDate","d","call","when","toLocaleDateString","month","day","eventTypeColor","_c","$RefreshReg$"],"sources":["/Users/sebastianfornelli/XcodeProjects/Relacion/CascadeProjects/windsurf-project/client/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { listEvents } from '../lib/calendar';\nimport Countdown from '../components/Countdown';\nimport RandomPhoto from '../components/RandomPhoto';\n\nexport default function Dashboard() {\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Hardcoded anniversary date: November 24, 2024\n  const anniv = '2024-11-24';\n\n  // Generate automatic special events (only next occurrence of each type)\n  const generateSpecialEvents = () => {\n    const specialEvents = [];\n    const now = new Date();\n    const anniversaryDate = new Date(2024, 10, 24); // November 24, 2024\n    \n    // Find next monthiversary/anniversary (24th of next month)\n    let nextMonthiversary = null;\n    for (let i = 0; i < 24; i++) { // Look ahead 24 months\n      const testDate = new Date(now.getFullYear(), now.getMonth() + i, 24);\n      if (testDate > now && testDate >= anniversaryDate) {\n        const isRealAnniversary = testDate.getMonth() === 10; // November\n        \n        // Calculate months since anniversary\n        const yearsDiff = testDate.getFullYear() - anniversaryDate.getFullYear();\n        const monthsDiff = testDate.getMonth() - anniversaryDate.getMonth();\n        const totalMonths = yearsDiff * 12 + monthsDiff;\n        \n        if (totalMonths > 0) {\n          let title = '';\n          if (totalMonths >= 12) {\n            const years = Math.floor(totalMonths / 12);\n            const remainingMonths = totalMonths % 12;\n            if (remainingMonths === 0) {\n              title = `${years} ${years === 1 ? 'aÃ±o' : 'aÃ±os'} juntos`;\n            } else {\n              title = `${years} ${years === 1 ? 'aÃ±o' : 'aÃ±os'} y ${remainingMonths} ${remainingMonths === 1 ? 'mes' : 'meses'} juntos`;\n            }\n          } else {\n            title = `${totalMonths} ${totalMonths === 1 ? 'mes' : 'meses'} juntos`;\n          }\n          \n          if (isRealAnniversary) {\n            title = `Â¡Aniversario! ${title}`;\n          } else {\n            title = `Â¡Mesiversario! ${title}`;\n          }\n          \n          nextMonthiversary = {\n            id: `anniversary-${testDate.getFullYear()}-${testDate.getMonth()}`,\n            title,\n            start: { toDate: () => testDate },\n            location: '',\n            eventType: 'conjunto',\n            isSpecialEvent: true,\n            specialType: isRealAnniversary ? 'anniversary' : 'monthiversary'\n          };\n          break;\n        }\n      }\n    }\n    \n    if (nextMonthiversary) {\n      specialEvents.push(nextMonthiversary);\n    }\n    \n    // Find next Lucy's birthday (April 21)\n    let nextLucyBirthday = null;\n    for (let year = now.getFullYear(); year <= now.getFullYear() + 1; year++) {\n      const lucyBirthday = new Date(year, 3, 21); // April 21\n      if (lucyBirthday > now) {\n        const lucyAge = year - 2003;\n        if (lucyAge > 0) {\n          nextLucyBirthday = {\n            id: `lucy-birthday-${year}`,\n            title: `Â¡CumpleaÃ±os de Lucy! ${lucyAge} aÃ±os`,\n            start: { toDate: () => lucyBirthday },\n            location: '',\n            eventType: 'lucy-birthday',\n            isSpecialEvent: true,\n            specialType: 'birthday'\n          };\n          break;\n        }\n      }\n    }\n    \n    if (nextLucyBirthday) {\n      specialEvents.push(nextLucyBirthday);\n    }\n    \n    // Find next Sebas's birthday (November 4)\n    let nextSebasBirthday = null;\n    for (let year = now.getFullYear(); year <= now.getFullYear() + 1; year++) {\n      const sebasBirthday = new Date(year, 10, 4); // November 4\n      if (sebasBirthday > now) {\n        const sebasAge = year - 1998;\n        if (sebasAge > 0) {\n          nextSebasBirthday = {\n            id: `sebas-birthday-${year}`,\n            title: `Â¡CumpleaÃ±os de Sebas! ${sebasAge} aÃ±os`,\n            start: { toDate: () => sebasBirthday },\n            location: '',\n            eventType: 'sebas-birthday',\n            isSpecialEvent: true,\n            specialType: 'birthday'\n          };\n          break;\n        }\n      }\n    }\n    \n    if (nextSebasBirthday) {\n      specialEvents.push(nextSebasBirthday);\n    }\n    \n    return specialEvents;\n  };\n\n  const timeTogether = useMemo(() => {\n    const start = new Date(anniv);\n    const now = new Date();\n\n    let years = now.getFullYear() - start.getFullYear();\n    let months = now.getMonth() - start.getMonth();\n    let days = now.getDate() - start.getDate();\n\n    if (days < 0) {\n      months--;\n      const lastMonth = new Date(now.getFullYear(), now.getMonth(), 0);\n      days += lastMonth.getDate();\n    }\n\n    if (months < 0) {\n      years--;\n      months += 12;\n    }\n\n    return { years, months, days };\n  }, [anniv]);\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function fetchEvents() {\n      console.log('ðŸ”„ Dashboard: Starting to load events');\n      setLoading(true);\n      try {\n        const pairId = localStorage.getItem('pairId');\n        if (pairId && !isCancelled) {\n          const firestoreEvents = await listEvents(pairId, { futureOnly: true, max: 100 });\n          \n          // Generate special events\n          const specialEvents = generateSpecialEvents();\n          \n          // Merge and sort all events chronologically\n          const allEvents = [...firestoreEvents, ...specialEvents];\n          allEvents.sort((a, b) => {\n            const dateA = a.start?.toDate ? a.start.toDate() : new Date(0);\n            const dateB = b.start?.toDate ? b.start.toDate() : new Date(0);\n            return dateA - dateB;\n          });\n          \n          console.log('âœ… Dashboard: Events loaded', allEvents.length, 'events');\n          setEvents(allEvents);\n        }\n      } catch (error) {\n        console.error(\"Error fetching events:\", error);\n        // Even if Firestore fails, show special events\n        const specialEvents = generateSpecialEvents();\n        specialEvents.sort((a, b) => {\n          const dateA = a.start?.toDate ? a.start.toDate() : new Date(0);\n          const dateB = b.start?.toDate ? b.start.toDate() : new Date(0);\n          return dateA - dateB;\n        });\n        setEvents(specialEvents);\n      } finally {\n        if (!isCancelled) {\n          console.log('ðŸ Dashboard: Loading finished');\n          setLoading(false);\n        }\n      }\n    }\n    fetchEvents();\n    return () => { isCancelled = true; };\n  }, []);\n\n  const nextEvent = useMemo(() => {\n    // Only show next \"conjunto\" event for countdown\n    const conjuntoEvents = events.filter(event => event.eventType === 'conjunto');\n    const result = conjuntoEvents.length > 0 ? conjuntoEvents[0] : null;\n    console.log('ðŸŽ¯ Dashboard: nextEvent changed', result ? result.title : 'null');\n    return result;\n  }, [events]);\n\n  return (\n    <div className=\"space-y-4\">\n      {timeTogether ? (\n        <div className=\"card\">\n          <div className=\"text-sm text-gray-600 mb-2\">Llevamos juntos</div>\n          <div className=\"flex justify-around gap-2 p-3 bg-rose-50/50 rounded-lg\">\n            {[ \n              { value: timeTogether.years, label: 'AÃ±o', plural: 'AÃ±os' },\n              { value: timeTogether.months, label: 'Mes', plural: 'Meses' },\n              { value: timeTogether.days, label: 'DÃ­a', plural: 'DÃ­as' } \n            ].map(({ value, label, plural }) => (\n              (timeTogether.years > 0 || label !== 'AÃ±o') && // Show years only if > 0\n              (timeTogether.months > 0 || label !== 'Mes' || timeTogether.years > 0) && // Show months if > 0 or if years are shown\n              <div key={label} className=\"text-center\">\n                <div className=\"text-2xl md:text-3xl font-bold text-rose-600\">{String(value).padStart(2, '0')}</div>\n                <div className=\"text-xs text-gray-500\">{value === 1 ? label : plural}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <div className=\"card\">\n          <div className=\"text-sm text-gray-600\">Configura tu aniversario en Ajustes</div>\n          <Link to=\"/settings\" className=\"inline-block mt-2 btn-primary\">Ir a Ajustes</Link>\n        </div>\n      )}\n\n      <div className=\"card\">\n        {nextEvent ? (\n          <>\n            <div className=\"text-sm text-gray-600 mb-2\">PrÃ³ximo evento</div>\n            <div className=\"text-lg font-semibold text-gray-900 mb-2\">{nextEvent.title}</div>\n            <div className=\"min-h-[80px]\">\n              <Countdown toDate={nextEvent.start.toDate()} />\n            </div>\n          </>\n        ) : (\n          <div className=\"text-sm text-gray-500 min-h-[80px] flex items-center\">\n            {loading ? \"Cargando prÃ³ximo evento...\" : \"No hay eventos prÃ³ximos\"}\n          </div>\n        )}\n      </div>\n\n      <div className=\"card\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"text-sm text-gray-600\">PrÃ³ximos eventos</h3>\n          <Link to=\"/calendar\" className=\"btn-link text-sm\">Ver calendario</Link>\n        </div>\n        <div className=\"min-h-[140px]\">\n          {loading ? (\n            <div className=\"space-y-2\">\n              <div className=\"text-sm flex items-center gap-2\">\n                <div className=\"animate-pulse bg-gray-200 h-4 rounded flex-1\"></div>\n                <div className=\"animate-pulse bg-gray-200 w-2 h-2 rounded-full\"></div>\n              </div>\n              <div className=\"animate-pulse bg-gray-200 h-3 rounded w-20\"></div>\n              <div className=\"text-sm flex items-center gap-2 mt-2\">\n                <div className=\"animate-pulse bg-gray-200 h-4 rounded flex-1\"></div>\n                <div className=\"animate-pulse bg-gray-200 w-2 h-2 rounded-full\"></div>\n              </div>\n              <div className=\"animate-pulse bg-gray-200 h-3 rounded w-24\"></div>\n              <div className=\"text-sm flex items-center gap-2 mt-2\">\n                <div className=\"animate-pulse bg-gray-200 h-4 rounded flex-1\"></div>\n                <div className=\"animate-pulse bg-gray-200 w-2 h-2 rounded-full\"></div>\n              </div>\n              <div className=\"animate-pulse bg-gray-200 h-3 rounded w-16\"></div>\n            </div>\n          ) : events.length > 0 ? (\n            <ul className=\"space-y-2\">\n              {events.slice(0, 5).map(ev => {\n                const d = ev.start?.toDate?.();\n                const when = d ? d.toLocaleDateString('es-ES', { month: 'long', day: 'numeric' }) : '';\n                \n                // Get event type color\n                let eventTypeColor = 'bg-rose-500'; // Default: conjunto (pink)\n                if (ev.eventType === 'novio') {\n                  eventTypeColor = 'bg-yellow-500';\n                } else if (ev.eventType === 'novia') {\n                  eventTypeColor = 'bg-purple-500';\n                } else if (ev.eventType === 'sebas-birthday') {\n                  eventTypeColor = 'bg-yellow-500'; // Sebas birthday: yellow\n                } else if (ev.eventType === 'lucy-birthday') {\n                  eventTypeColor = 'bg-purple-400'; // Lucy birthday: lilac\n                } else if (ev.eventType === 'conjunto' && ev.isSpecialEvent) {\n                  eventTypeColor = 'bg-rose-500'; // Anniversary/monthiversary: pink\n                }\n                \n                return (\n                  <li key={ev.id} className=\"text-sm flex items-center gap-2\">\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-medium text-gray-800 truncate\">{ev.title}</span>\n                        <div className={`w-2 h-2 rounded-full flex-shrink-0 ${eventTypeColor}`}></div>\n                      </div>\n                      <span className=\"text-xs text-gray-500\">{when}</span>\n                    </div>\n                  </li>\n                );\n              })}\n            </ul>\n          ) : (\n            <p className=\"text-gray-500\">No hay prÃ³ximos eventos. Â¡Crea el primero!</p>\n          )}\n        </div>\n      </div>\n\n      <RandomPhoto />\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}